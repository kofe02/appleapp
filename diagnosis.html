<!DOCTYPE html>
<html lang="ja">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-27DSCB1NE0"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-27DSCB1NE0');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚Šã‚“ã”æ€§æ ¼è¨ºæ–­ - ã‚ãªãŸã¯ã©ã®ã‚Šã‚“ã”ã‚¿ã‚¤ãƒ—ï¼Ÿ</title>
    <meta name="description" content="12ã®è³ªå•ã«ç­”ãˆã¦ã€ã‚ãªãŸã®æ€§æ ¼ã‚¿ã‚¤ãƒ—ã‚’è¨ºæ–­ã€‚ã¤ãŒã‚‹ã€ãµã˜ã€ç‹æ—ãªã‚16ç¨®é¡ã®ã‚Šã‚“ã”ã‹ã‚‰ã‚ãªãŸã«ã´ã£ãŸã‚Šã®å“ç¨®ãŒè¦‹ã¤ã‹ã‚Šã¾ã™ã€‚">
    <meta name="keywords" content="ã‚Šã‚“ã”è¨ºæ–­,æ€§æ ¼è¨ºæ–­,ã‚Šã‚“ã”ã®ä¼š,é§’å ´ç¥­2025,æ±å¤§,æ…¶æ‡‰,é’æ£®,ã‚Šã‚“ã”,è¨ºæ–­ãƒ†ã‚¹ãƒˆ">
    <meta name="author" content="ã‚Šã‚“ã”ã®ä¼š">
    <!-- theme-color: Chrome/Safariã®ã¿ã‚µãƒãƒ¼ãƒˆ (Firefox/Operaã¯ç„¡è¦–) -->
    <meta name="theme-color" content="#feca57">
    <link rel="canonical" href="https://kofe02.github.io/appleapp/">

    <!-- OGP / Open Graph Protocol -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://kofe02.github.io/appleapp/">
    <meta property="og:title" content="ã‚Šã‚“ã”æ€§æ ¼è¨ºæ–­ - ã‚ãªãŸã¯ã©ã®ã‚Šã‚“ã”ã‚¿ã‚¤ãƒ—?">
    <meta property="og:description" content="12ã®è³ªå•ã§ã‚ãªãŸã®æ€§æ ¼ã‚’ã‚Šã‚“ã”ã«ä¾‹ãˆã‚‹è¨ºæ–­ãƒ†ã‚¹ãƒˆã€‚ã¤ãŒã‚‹ã€ãµã˜ã€ç‹æ—ãªã‚‰16ç¨®é¡ã‹ã‚‰ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ã‚Šã‚“ã”ã‚’è¦‹ã¤ã‘ã‚ˆã†ï¼">
    <meta property="og:image" content="https://kofe02.github.io/appleapp/src/image.png">
    <meta property="og:site_name" content="ã‚Šã‚“ã”æ€§æ ¼è¨ºæ–­">
    <meta property="og:locale" content="ja_JP">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@ut_keio_apple">
    <meta name="twitter:creator" content="@ut_keio_apple">
    <meta name="twitter:title" content="ã‚Šã‚“ã”æ€§æ ¼è¨ºæ–­ - ã‚ãªãŸã¯ã©ã®ã‚Šã‚“ã”ã‚¿ã‚¤ãƒ—?">
    <meta name="twitter:description" content="12ã®è³ªå•ã§æ€§æ ¼ã‚’ã‚Šã‚“ã”ã«ä¾‹ãˆã‚‹è¨ºæ–­ãƒ†ã‚¹ãƒˆã€‚ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ã‚Šã‚“ã”ã‚’è¦‹ã¤ã‘ã‚ˆã†ï¼">
    <meta name="twitter:image" content="https://kofe02.github.io/appleapp/src/image.png">

    <link rel="icon" type="image/x-icon" href="src/favicon.ico">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, rgb(225, 225, 180) 0%, #feca57 50%, #ff9999 100%);
            min-height: 100vh;
            padding: 20px;
            padding-top: 60px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
        }

        h1 {
            color: #2d3436;
            font-size: 28px;
            font-weight: 700;
        }

        .subtitle {
            color: #636e72;
            margin-top: 10px;
            font-size: 16px;
        }

        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 8px;
            background: rgba(236, 240, 241, 0.9);
            overflow: hidden;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #e7c75c, #fe9b9b);
            transition: width 0.3s ease;
        }

        .question-container {
            margin: 30px 0;
        }

        .question {
            font-size: 18px;
            color: #2d3436;
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #ff6b6b;
        }

        .question-number {
            color: #ff6b6b;
            font-weight: bold;
            margin-right: 10px;
        }

        .question.disabled {
            opacity: 0.3;
            position: relative;
        }

        .scale-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0;
            padding: 15px;
            background: white;
            border-radius: 10px;
        }

        .scale-label {
            font-size: 14px;
            color: #636e72;
            min-width: 100px;
            width: 150px;
        }

        .scale-label.left {
            color: #ff6b6b;
            font-weight: 600;
        }

        .scale-label.right {
            color: #00b894;
            font-weight: 600;
        }

        .scale-options {
            display: flex;
            gap: 15px;
            align-items: center;
            justify-content: center;
        }

        .scale-option {
            position: relative;
            width: 50px;
            height: 50px;
        }

        /* Size variations */
        .scale-option:nth-child(1),
        .scale-option:nth-child(5) {
            width: 50px;
            height: 50px;
        }

        .scale-option:nth-child(2),
        .scale-option:nth-child(4) {
            width: 45px;
            height: 45px;
        }

        .scale-option:nth-child(3) {
            width: 40px;
            height: 40px;
        }

        .scale-option input[type="radio"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            width: 100%;
            height: 100%;
            z-index: 2;
        }

        .scale-circle {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            z-index: 1;
        }

        /* Apple shape - sizes */
        .scale-option:nth-child(1) .apple-shape,
        .scale-option:nth-child(5) .apple-shape {
            width: 40px;
            height: 40px;
        }

        .scale-option:nth-child(2) .apple-shape,
        .scale-option:nth-child(4) .apple-shape {
            width: 36px;
            height: 36px;
        }

        .scale-option:nth-child(3) .apple-shape {
            width: 32px;
            height: 32px;
        }

        .apple-shape {
            position: relative;
            transform: scale(1);
            transition: transform 0.3s ease;
        }

        .apple-body {
            width: 100%;
            height: 100%;
            background: white;
            border: 3px solid #dfe6e9;
            border-radius: 50% 50% 60% 60% / 60% 60% 40% 40%;
            position: relative;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .apple-body::before {
            content: '';
            position: absolute;
            top: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 37.5%;
            height: 37.5%;
            background: white;
            border: 3px solid #dfe6e9;
            border-radius: 50%;
            border-bottom: none;
            clip-path: polygon(0 0, 100% 0, 100% 60%, 0 60%);
        }

        /* Color variations - gradient from strong to weak */
        .scale-option:nth-child(1) .apple-body,
        .scale-option:nth-child(1) .apple-body::before {
            border-color: #ff6b6b;
        }

        .scale-option:nth-child(2) .apple-body,
        .scale-option:nth-child(2) .apple-body::before {
            border-color: #ff9999;
        }

        .scale-option:nth-child(3) .apple-body,
        .scale-option:nth-child(3) .apple-body::before {
            border-color: #ffe4cc;
        }

        .scale-option:nth-child(4) .apple-body,
        .scale-option:nth-child(4) .apple-body::before {
            border-color: #99e5c7;
        }

        .scale-option:nth-child(5) .apple-body,
        .scale-option:nth-child(5) .apple-body::before {
            border-color: #00b894;
        }

        /* Apple stem and leaf */
        .apple-stem {
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%) translateY(10px);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 10;
            transform-origin: bottom center;
        }

        .stem {
            width: 3px;
            height: 8px;
            background: #8b4513;
            border-radius: 1px;
            position: relative;
            left: 2px;
        }

        .leaf {
            position: absolute;
            top: 2px;
            left: 4px;
            width: 8px;
            height: 5px;
            background: #00b894;
            border-radius: 0 100% 0 100%;
            transform: rotate(30deg);
        }

        /* Hover effect */
        .scale-option:hover .apple-shape {
            transform: scale(1.05);
        }

        /* Checked states with different colors */
        .scale-option:nth-child(1) input[type="radio"]:checked~.scale-circle .apple-body {
            background: linear-gradient(135deg, #ff6b6b, #ff8787);
            border-color: #ff6b6b;
        }

        .scale-option:nth-child(2) input[type="radio"]:checked~.scale-circle .apple-body {
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.8), rgba(255, 135, 135, 0.8));
            border-color: #ff9999;
        }

        .scale-option:nth-child(3) input[type="radio"]:checked~.scale-circle .apple-body {
            background: linear-gradient(135deg, rgba(253, 203, 110, 0.5), rgba(255, 234, 167, 0.5));
            border-color: #ffe4cc;
        }

        .scale-option:nth-child(4) input[type="radio"]:checked~.scale-circle .apple-body {
            background: linear-gradient(135deg, rgba(0, 184, 148, 0.8), rgba(85, 239, 196, 0.8));
            border-color: #99e5c7;
        }

        .scale-option:nth-child(5) input[type="radio"]:checked~.scale-circle .apple-body {
            background: linear-gradient(135deg, #00b894, #55efc4);
            border-color: #00b894;
        }

        .scale-option input[type="radio"]:checked~.scale-circle .apple-stem {
            opacity: 1;
            animation: popStem 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .scale-option input[type="radio"]:checked~.scale-circle .apple-shape {
            transform: scale(1.15);
            animation: bounceApple 0.5s ease;
        }

        @keyframes popStem {
            0% {
                opacity: 0;
                transform: translateX(-50%) translateY(10px) scale(0) rotate(-180deg);
            }

            50% {
                opacity: 1;
                transform: translateX(-50%) translateY(-3px) scale(1.2) rotate(10deg);
            }

            100% {
                transform: translateX(-50%) translateY(0) scale(1) rotate(0);
            }
        }

        @keyframes bounceApple {
            0% {
                transform: scale(1);
            }

            30% {
                transform: scale(0.9);
            }

            60% {
                transform: scale(1.2);
            }

            100% {
                transform: scale(1.15);
            }
        }

        .navigation {
            display: flex;
            justify-content: center;
            margin-top: 40px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .btn-prev {
            background: #ecf0f1;
            color: #636e72;
        }

        .btn-next {
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            color: white;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .result-container {
            display: none;
            text-align: center;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-title {
            font-size: 32px;
            color: #2d3436;
            margin: 30px 0;
            font-weight: 700;
        }

        .apple-type {
            font-size: 48px;
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 20px 0;
            font-weight: 900;
        }

        .result-description {
            font-size: 18px;
            color: #636e72;
            line-height: 1.8;
            margin: 30px 0;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .apple-image-container {
            margin: 30px auto;
            text-align: center;
        }

        .apple-result-image {
            max-width: 300px;
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            font-size: 120px;
        }

        .type-explanation {
            margin: 30px 0;
            padding: 25px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .type-explanation h3 {
            font-size: 20px;
            color: #2d3436;
            margin-bottom: 20px;
            text-align: center;
        }

        .type-table {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .type-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: #f8f9fa;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .type-row.highlighted {
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            color: white;
            font-weight: 600;
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);
        }

        .type-label {
            font-weight: 600;
            font-size: 16px;
        }

        .type-desc {
            font-size: 14px;
            text-align: right;
        }

        .share-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .share-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            color: white;
        }

        .share-btn.twitter {
            background: #1DA1F2;
        }

        .share-btn.twitter:hover {
            background: #1a8cd8;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(29, 161, 242, 0.4);
        }

        .share-btn.line {
            background: #00B900;
        }

        .share-btn.line:hover {
            background: #009900;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 185, 0, 0.4);
        }

        .share-icon {
            width: 20px;
            height: 20px;
        }

        .page-indicator {
            text-align: center;
            color: #636e72;
            margin-top: 20px;
            font-size: 14px;
        }

        .social-links {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid #ecf0f1;
            text-align: center;
        }

        .social-links a {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin: 0 10px;
            padding: 12px 24px;
            background: #1da1f2;
            color: white;
            text-decoration: none;
            border-radius: 25px;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .social-links a:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .social-links a.instagram {
            background: linear-gradient(135deg, #833ab4, #fd1d1d, #fcb045);
        }

        .social-icon {
            width: 20px;
            height: 20px;
        }

        /* Mobile responsive styles */
        @media (max-width: 768px) {
            body {
                padding: 0px;
                padding-top: 8px;
            }

            .container {
                padding: 20px;
                border-radius: 0;
            }

            h1 {
                font-size: 24px;
            }

            .subtitle {
                font-size: 14px;
            }

            .question {
                font-size: 16px;
                padding: 15px;
            }

            .scale-container {
                flex-direction: column;
                gap: 15px;
            }

            .scale-label {
                width: 100%;
            }

            .scale-label.mobile-top {
                order: -1;
                text-align: left;
            }

            .scale-label.mobile-bottom {
                order: 1;
                text-align: right;
            }

            .scale-options {
                order: 0;
                width: 80%;
                gap: 20px;
                padding: 10px 0;
            }

            /* Adjust apple sizes for mobile */
            .scale-option:nth-child(1),
            .scale-option:nth-child(5) {
                width: 40px;
                height: 40px;
            }

            .scale-option:nth-child(2),
            .scale-option:nth-child(4) {
                width: 38px;
                height: 38px;
            }

            .scale-option:nth-child(3) {
                width: 36px;
                height: 36px;
            }

            .scale-option:nth-child(1) .apple-shape,
            .scale-option:nth-child(5) .apple-shape {
                width: 40px;
                height: 40px;
            }

            .scale-option:nth-child(2) .apple-shape,
            .scale-option:nth-child(4) .apple-shape {
                width: 36px;
                height: 36px;
            }

            .scale-option:nth-child(3) .apple-shape {
                width: 34px;
                height: 34px;
            }

            .navigation {
                gap: 10px;
            }

            .btn {
                padding: 10px 20px;
                font-size: 14px;
            }

            .result-title {
                font-size: 24px;
            }

            .apple-type {
                font-size: 36px;
            }

            .result-description {
                font-size: 16px;
                padding: 20px;
            }

            .apple-result-image {
                max-width: 250px;
                height: 250px;
                font-size: 80px;
            }

            .type-table {
                grid-template-columns: 1fr;
            }

            .share-buttons {
                flex-direction: column;
                align-items: stretch;
            }

            .share-btn {
                width: 100%;
                justify-content: center;
            }

            .social-links {
                display: flex;
                justify-content: center;
                gap: 15px;
            }

            .social-links a {
                padding: 0;
                width: 50px;
                height: 50px;
                border-radius: 50%;
                justify-content: center;
                align-items: center;
                margin: 0;
                font-size: 0;
                display: inline-flex;
            }

            .social-links a svg {
                width: 24px;
                height: 24px;
            }
        }

        @media (max-width: 480px) {
            .scale-options {
                gap: 20px;
            }

            .apple-type {
                font-size: 28px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <div class="logo-icon">ğŸ</div>
                <h1>ã‚Šã‚“ã”æ€§æ ¼è¨ºæ–­</h1>
            </div>
            <p class="subtitle">12ã®è³ªå•ã§ã‚ãªãŸã®ã‚Šã‚“ã”ã‚¿ã‚¤ãƒ—ã‚’è¨ºæ–­ã—ã¾ã™</p>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>

        <div id="questionContainer" class="question-container">
            <!-- Questions will be dynamically inserted here -->
        </div>

        <div class="navigation">
            <button class="btn btn-next" id="nextBtn" onclick="nextPage()">æ¬¡ã¸</button>
        </div>

        <div class="page-indicator" id="pageIndicator"></div>

        <div id="resultContainer" class="result-container">
            <h2 class="result-title">è¨ºæ–­çµæœ</h2>

            <div class="apple-image-container">
                <div class="apple-result-image" id="appleImage">ğŸ</div>
            </div>

            <div class="apple-type" id="appleType"></div>
            <div class="result-description" id="resultDescription"></div>

            <div class="type-explanation">
                <h3>ã‚ãªãŸã®ã‚¿ã‚¤ãƒ—è§£èª¬</h3>
                <div class="type-table" id="typeTable"></div>
            </div>

            <div class="share-buttons">
                <button class="share-btn twitter" id="shareTwitter">
                    <svg class="share-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
                    </svg>
                    Xã§ã‚·ã‚§ã‚¢
                </button>
                <button class="share-btn line" id="shareLine">
                    <svg class="share-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.346 0 .627.285.627.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.105.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346 0 .628.285.628.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.768.039 1.08l-.171 1.026c-.053.303-.242 1.186 1.039.647 1.281-.54 6.911-4.069 9.428-6.967C23.176 14.393 24 12.458 24 10.314" />
                    </svg>
                    LINEã§ã‚·ã‚§ã‚¢
                </button>
            </div>

            <div class="social-links">
                <a href="https://x.com/ut_keio_apple" target="_blank" rel="noopener">
                    <svg class="social-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
                    </svg>
                    å…¬å¼X (Twitter)
                </a>
                <a href="https://www.instagram.com/ut_keio_apple/" target="_blank" rel="noopener" class="instagram">
                    <svg class="social-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" />
                    </svg>
                    å…¬å¼Instagram
                </a>
            </div>

            <div class="footer-links">
                <a href="terms.html">åˆ©ç”¨è¦ç´„</a>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            // Redâ‡”Green questions (1-3)
            { text: "ã‚ãªãŸã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚«ãƒ©ãƒ¼ã¯ã©ã£ã¡ã«è¿‘ã„ï¼Ÿ", left: "èµ¤ã‚„ã‚ªãƒ¬ãƒ³ã‚¸", right: "é’ã‚„ç·‘", type: "RG" },
            { text: "è¾²æ¥­ã‚’ã™ã‚‹ã¨ã—ãŸã‚‰ã€ã©ã£ã¡ãŒè‡ªåˆ†ã«åˆã£ã¦ã„ã‚‹ã¨æ„Ÿã˜ã‚‹ï¼Ÿ", left: "ã¿ã‚“ãªã§å”åŠ›ã™ã‚‹è¾²ä½œæ¥­", right: "1äººã§é›†ä¸­ã™ã‚‹è¾²ä½œæ¥­", type: "RG" },
            { text: "ã‚Šã‚“ã”ã‚’é£Ÿã¹ã‚‹ã¨ã—ãŸã‚‰ã€ã©ã“ã§é£Ÿã¹ãŸã„ï¼Ÿ", left: "å¤–ã§ãƒ”ã‚¯ãƒ‹ãƒƒã‚¯æ°—åˆ†ã§", right: "å®¶ã®ä¸­ã§ã‚†ã£ãã‚Š", type: "RG" },

            // Sweetâ‡”Tart questions (4-6)
            { text: "ã‚Šã‚“ã”ã‚’é£Ÿã¹ã‚‹ã¨ã—ãŸã‚‰ã€ã©ã£ã¡ãŒå¥½ã¿ï¼Ÿ", left: "ç„¼ããƒªãƒ³ã‚´", right: "ç”Ÿã®ã‚Šã‚“ã”", type: "ST" },
            { text: "ã‚Šã‚“ã”ã®ã‚¹ã‚¤ãƒ¼ãƒ„ã‚’é£Ÿã¹ã‚‹ã¨ã—ãŸã‚‰ã€ã©ã£ã¡ã®æ–¹ãŒå¥½ãï¼Ÿ", left: "ã‚Šã‚“ã”ã®ã‚³ãƒ³ãƒãƒ¼ãƒˆ", right: "ã‚Šã‚“ã”ã®ã‚·ãƒ£ãƒ¼ãƒ™ãƒƒãƒˆ", type: "ST" },
            { text: "ãŠè…¹ãŒãƒšã‚³ãºã‚³ã â€¦ç›®ã®å‰ã«ã€Œé£Ÿã¹ã¦ã¯ã„ã‘ãªã„ã€ã¨æ›¸ã‹ã‚ŒãŸã‚Šã‚“ã”ãŒï¼ã‚ãªãŸãªã‚‰ã©ã†ã™ã‚‹ï¼Ÿ", left: "å°‘ã—ãªã‚‰é£Ÿã¹ã¦ã‚‚å¤§ä¸ˆå¤«", right: "ãªã‚‹ã¹ãé£Ÿã¹ãªã„ã‚ˆã†ã«ã™ã‚‹", type: "ST" },

            // Earlyâ‡”Late questions (7-9)
            { text: "ã‚Šã‚“ã”ã®è¦‹ãŸç›®ãªã‚‰ã€ã©ã£ã¡ãŒå¥½ã¿ï¼Ÿ", left: "å°ã•ãã¦å½¢ã®ãã‚Œã„ãªã‚Šã‚“ã”", right: "ã²ã¨ãã‚å¤§ããã¦ç›®ç«‹ã¤ã‚Šã‚“ã”", type: "EL" },
            { text: "ã‚ã‚“ã©ãã•ãã¦å¤§å¤‰ãªä½œæ¥­ãŒã‚ã£ãŸã¨ã—ãŸã‚‰ã€ã‚ãªãŸã¯ã©ã†ã™ã‚‹ï¼Ÿ", left: "å…ˆã«ã‚„ã‚‹ã‚¿ã‚¤ãƒ—", right: "ã‚ã¨å›ã—ã«ã™ã‚‹ã‚¿ã‚¤ãƒ—", type: "EL" },
            { text: "ã‚Šã‚“ã”ã®çš®ã‚€ãã‚’é ¼ã¾ã‚Œã¡ã‚ƒã£ãŸï¼ãã‚“ãªæ™‚ã€ã‚ãªãŸãªã‚‰ã©ã†ã™ã‚‹ï¼Ÿ", left: "ã¨ã«ã‹ãã‚¹ãƒ”ãƒ¼ãƒ‡ã‚£ãƒ¼ã«ã‚„ã‚‹", right: "æ…é‡ã‹ã¤ä¸å¯§ã«ã‚„ã‚‹", type: "EL" },

            // Famousâ‡”Unique questions (10-12)
            { text: "ã‚ãªãŸã®æ´‹æœã‚„ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ã¯ã©ã£ã¡ã«è¿‘ã„ï¼Ÿ", left: "ã¨ã«ã‹ãæµè¡Œã«ã‚ã‚ã›ã¦ãŠã“ã†â€¦æ´¾", right: "ã“ã ã‚ã‚Šã‚’ã‚‚ã£ã¦é¸ã³ãŸã„â€¦æ´¾", type: "FU" },
            { text: "æ—…è¡Œã«è¡Œãã“ã¨ã«ãªã£ãŸï¼ãã‚“ãªæ™‚ã€ã‚ãªãŸã¯ã©ã£ã¡ã«è¡ŒããŸã„ï¼Ÿ", left: "æœ‰åãªè¦³å…‰ã‚¹ãƒãƒƒãƒˆã‚’æ¥½ã—ã‚€", right: "å±±å¥¥ã®çã—ã„æ¸©æ³‰è¡—ã§ã‚†ã£ãã‚Š", type: "FU" },
            { text: "ã‚‚ã—ã‚Šã‚“ã”ã‚’è‚²ã¦ã‚‹ã¨ã—ãŸã‚‰ã€ã©ã£ã¡ã®å¸«åŒ ã«å¼Ÿå­å…¥ã‚Šã™ã‚‹ï¼Ÿ", left: "ã¨ã«ã‹ãæ²¢å±±è‚²ã¦ã¦å£²ã‚‹ãœï¼ã‚¬ãƒƒãƒ„ç³»", right: "è‡ªåˆ†ã®å¥½ããªå“ç¨®ã—ã‹è‚²ã¦ãªã„ï¼è·äººç³»", type: "FU" }
        ];

        const appleTypes = {
            "RFSE": { name: "ã¤ãŒã‚‹", description: "è±Šã‹ãªç”˜ã¿ã¨ãƒ‘ãƒªãƒƒã¨ã—ãŸé£Ÿæ„ŸãŒç‰¹å¾´ã®ã€èª°ã‹ã‚‰ã‚‚æ„›ã•ã‚Œã‚‹æ—©ç”Ÿï¼ˆã‚ã›ï¼‰ã‚Šã‚“ã”ã¯ã€ãã£ã¨ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ã¯ãšï¼", summary: "æ˜ã‚‹ãè¦ªã—ã¿ã‚„ã™ã„æ—©ç”Ÿã®äººæ°—è€…", image: "" },
            "RFSL": { name: "ãµã˜", description: "èœœãŒå…¥ã‚Šã‚„ã™ãã€ç”˜ã•ã¨ã‚·ãƒ£ã‚­ã‚·ãƒ£ã‚­æ„Ÿã®ãƒãƒ©ãƒ³ã‚¹ãŒã¨ã‚ŒãŸç‹é“ã‚Šã‚“ã”ã¯ã€ãã£ã¨ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ã¯ãšï¼", summary: "å®‰å®šæ„ŸæŠœç¾¤ã®ç‹é“ã‚¿ã‚¤ãƒ—", image: "" },
            "RFTE": { name: "ã‚¸ãƒ§ãƒŠã‚´ãƒ¼ãƒ«ãƒ‰", description: "å¼·ã„é…¸å‘³ã¨ç”˜ã¿ã®ãƒ¡ãƒªãƒãƒªãŒã‚ã‚Šã€æ–™ç†ã‚„ãŠè“å­ä½œã‚Šã«ã‚‚äººæ°—ã®ã‚Šã‚“ã”ã¯ã€ãã£ã¨ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ã¯ãšï¼", summary: "ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã§ãƒ¡ãƒªãƒãƒªã®ã‚ã‚‹äººæ°—è€…", image: "" },
            "RFTL": { name: "ç´…ç‰", description: "ã‚¬ãƒ„ãƒ³ã¨ãã‚‹åŠ›å¼·ã„é…¸å‘³ãŒç‰¹å¾´ã§ã€å¤ãã‹ã‚‰æ„›ã•ã‚Œã‚‹å®šç•ªå“ç¨®ã¯ã€ãã£ã¨ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ã¯ãšï¼", summary: "æƒ…ç†±çš„ã§ã‚¹ãƒˆã‚¤ãƒƒã‚¯ãªå®šç•ªå“ç¨®", image: "" },
            "RUSE": { name: "æœªå¸Œã‚‰ã„ãµ", description: "ã•ã£ã±ã‚Šã¨ã—ãŸç”˜ã¿ã¨ã‚¸ãƒ¥ãƒ¼ã‚·ãƒ¼ãªæœæ±ãŒç‰¹å¾´ã®ã€å¸‚å ´ã§ã¯çã—ã„æ—©ç”Ÿï¼ˆã‚ã›ï¼‰å“ç¨®ã¯ã€ãã£ã¨ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ã¯ãšï¼", summary: "å€‹æ€§çš„ã§å„ªã—ã„æ—©ç”Ÿã®ãƒ¬ã‚¢å“ç¨®", image: "" },
            "RUSL": { name: "ä¸–ç•Œä¸€", description: "è¦æ ¼å¤–ã®å¤§ãã•ã¨å„ªã—ã„ç”˜ã•ãŒç‰¹å¾´ã®ã€è´ˆç­”å“ã¨ã—ã¦ã‚‚äººæ°—ã®çã—ã„å“ç¨®ã¯ã€ãã£ã¨ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ã¯ãšï¼", summary: "å¤§ã‚‰ã‹ã§å„ªã—ã„å€‹æ€§æ´¾", image: "" },
            "RUTE": { name: "å¾¡æ‰€å·åŸ", description: "ã—ã£ã‹ã‚Šã¨ã—ãŸé…¸å‘³ãŒã‚ã‚Šã€æµé€šé‡ãŒå°‘ãªãçŸ¥ã‚‹äººãçŸ¥ã‚‹ãƒ‹ãƒƒãƒãªå“ç¨®ã¯ã€ãã£ã¨ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ã¯ãšï¼", summary: "ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã§ã‚¹ãƒˆã‚¤ãƒƒã‚¯ãªå€‹æ€§æ´¾", image: "" },
            "RUTL": { name: "ã‚€ã¤", description: "å¤§å‹ã§é£Ÿã¹å¿œãˆã®ã‚ã‚‹æœè‚‰ã¨ç¨‹ã‚ˆã„é…¸å‘³ãŒç‰¹å¾´ã®ã€ã˜ã£ãã‚Šå‘³ã‚ã„ãŸã„çã—ã„æ™šç”Ÿï¼ˆãŠãã¦ï¼‰å“ç¨®ã¯ã€ãã£ã¨ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ã¯ãšï¼", summary: "ã˜ã£ãã‚Šå‹ã®ã‚¹ãƒˆã‚¤ãƒƒã‚¯å€‹æ€§æ´¾", image: "" },
            "GFSE": { name: "ãƒˆã‚­", description: "ç”˜ã¿ãŒå¼·ãé…¸å‘³ãŒå°‘ãªã„ã€çˆ½ã‚„ã‹ãªå‘³ã‚ã„ãŒç‰¹å¾´ã®ã€è¿‘å¹´äººæ°—ã®é«˜ã„é»„è‰²ã„ã‚Šã‚“ã”ã¯ã€ãã£ã¨ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ã¯ãšï¼", summary: "ç©ã‚„ã‹ã§å„ªã—ã„æ—©ç”Ÿã®äººæ°—è€…", image: "" },
            "GFSL": { name: "ç‹æ—", description: "å¼·ã„ç”˜ã•ã¨ç‹¬ç‰¹ãªé¦™ã‚ŠãŒç‰¹å¾´ã®ã€èª°ã‚‚ãŒçŸ¥ã‚‹ç·‘é»„è‰²ã®å®šç•ªå“ç¨®ã¯ã€ãã£ã¨ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ã¯ãšï¼", summary: "è½ã¡ç€ã„ãŸå„ªã—ã•ã®ç‹é“ã‚¿ã‚¤ãƒ—", image: "" },
            "GFTE": { name: "ããŠã†", description: "ã•ã£ã±ã‚Šã¨ã—ãŸé…¸å‘³ã¨ã‚·ãƒ£ã‚­ã‚·ãƒ£ã‚­æ„ŸãŒç‰¹å¾´ã®ã€åˆç§‹ã«å‡ºå›ã‚‹çˆ½ã‚„ã‹ãªé»„è‰²ã„ã‚Šã‚“ã”ã¯ã€ãã£ã¨ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ã¯ãšï¼", summary: "å†·é™ã§ã‚¹ãƒˆã‚¤ãƒƒã‚¯ãªæ—©ç”Ÿã®äººæ°—è€…", image: "" },
            "GFTL": { name: "ã‚·ãƒŠãƒã‚´ãƒ¼ãƒ«ãƒ‰", description: "å¿ƒåœ°ã‚ˆã„é…¸å‘³ã¨ãƒ‘ãƒªãƒƒã¨ã—ãŸé£Ÿæ„ŸãŒç‰¹å¾´ã®ã€è²¯è”µæ€§ã®é«˜ã„é»„è‰²ã„ã‚Šã‚“ã”ã¯ã€ãã£ã¨ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ã¯ãšï¼", summary: "ç€å®Ÿã§ã‚¹ãƒˆã‚¤ãƒƒã‚¯ãªå®šç•ªå“ç¨®", image: "" },
            "GUSE": { name: "ãã‚“ã¾åæœˆ", description: "æ¿ƒåšãªç”˜ã¿ã¨ã»ã®ã‹ãªé¦™ã‚ŠãŒç‰¹å¾´ã®ã€å¸Œå°‘ãªé»„è‰²ã„é«˜ç´šå“ç¨®ã¯ã€ãã£ã¨ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ã¯ãšï¼", summary: "ç©ã‚„ã‹ã§å„ªã—ã„å€‹æ€§æ´¾ã®é«˜ç´šå“", image: "" },
            "GUSL": { name: "é‡‘æ˜Ÿ", description: "ä¸Šå“ã§ã¾ã‚ã‚„ã‹ãªç”˜ã•ãŒç‰¹å¾´ã®ã€è¡¨é¢ã®ã‚µãƒ“ãŒç‰¹å¾´çš„ãªçã—ã„é»„è‰²ã„ã‚Šã‚“ã”ã¯ã€ãã£ã¨ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ã¯ãšï¼", summary: "ãƒã‚¤ãƒšãƒ¼ã‚¹ã§å„ªã—ã„å€‹æ€§æ´¾", image: "" },
            "GUTE": { name: "ç¥", description: "æ˜”ãªãŒã‚‰ã®çˆ½ã‚„ã‹ãªé…¸å‘³ãŒç‰¹å¾´ã®ã€ä¸€éƒ¨ã®åœ°åŸŸã§ã—ã‹æµé€šã—ãªã„éå¸¸ã«çã—ã„å“ç¨®ã¯ã€ãã£ã¨ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ã¯ãšï¼", summary: "å†·é™ã§ã‚¹ãƒˆã‚¤ãƒƒã‚¯ãªãƒ¬ã‚¢å“ç¨®", image: "" },
            "GUTL": { name: "ã¯ã¤æ‹ãã‚Šã‚“", description: "é®®çƒˆãªé…¸å‘³ã¨ã‚·ãƒ£ãƒ¼ãƒ—ãªé¦™ã‚ŠãŒç‰¹å¾´ã®ã€æ–°ã—ã„å“ç¨®ã§ãƒ‹ãƒƒãƒãªãƒ•ã‚¡ãƒ³ãŒå¤šã„ã‚Šã‚“ã”ã¯ã€ãã£ã¨ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ã¯ãšï¼", summary: "ãƒã‚¤ãƒšãƒ¼ã‚¹ã§ã‚¹ãƒˆã‚¤ãƒƒã‚¯ãªå€‹æ€§æ´¾", image: "" }
        };        // Define apple colors for each position
        const appleColors = [
            '#ff6b6b', // Position 1 - Strong red
            '#ff9999', // Position 2 - Medium red
            '#ffe4cc', // Position 4 - Yellow
            '#99e5c7', // Position 6 - Medium green
            '#00b894'  // Position 7 - Strong green
        ];

        const appleSizes = [1.0, 0.9, 0.8, 0.9, 1.0]; // Size multipliers for each position

        let currentPage = 0;
        const questionsPerPage = 12;
        const totalPages = Math.ceil(questions.length / questionsPerPage);
        let answers = new Array(questions.length).fill(null);

        function renderQuestions() {
            const start = currentPage * questionsPerPage;
            const end = Math.min(start + questionsPerPage, questions.length);
            const container = document.getElementById('questionContainer');
            const isMobile = window.innerWidth <= 768;
            container.innerHTML = '';

            for (let i = start; i < end; i++) {
                const q = questions[i];
                const questionDiv = document.createElement('div');

                let isDisabled = false;
                for (let j = 0; j < i; j++) {
                    if (answers[j] === null) {
                        isDisabled = true;
                        break;
                    }
                }

                questionDiv.className = isDisabled ? 'question disabled' : 'question';

                if (isMobile) {
                    questionDiv.innerHTML = `
                        <span class="question-number">Q${i + 1}.</span> ${q.text}
                        <div class="scale-container">
                            <div class="scale-label left mobile-top">${q.left}</div>
                            <div class="scale-options">
                                ${[1, 2, 3, 4, 5].map(value => `
                                    <div class="scale-option">
                                        <input type="radio" id="q${i}_${value}" name="q${i}" value="${value}" 
                                               ${answers[i] === value ? 'checked' : ''}
                                               onchange="saveAnswer(${i}, ${value})">
                                        <label for="q${i}_${value}" class="scale-circle">
                                            <div class="apple-shape">
                                                <div class="apple-body"></div>
                                                <div class="apple-stem">
                                                    <div class="stem"></div>
                                                    <div class="leaf"></div>
                                                </div>
                                            </div>
                                        </label>
                                    </div>
                                `).join('')}
                            </div>
                            <div class="scale-label right mobile-bottom">${q.right}</div>
                        </div>
                    `;
                } else {
                    questionDiv.innerHTML = `
                        <span class="question-number">Q${i + 1}.</span> ${q.text}
                        <div class="scale-container">
                            <div class="scale-label left">${q.left}</div>
                            <div class="scale-options">
                                ${[1, 2, 3, 4, 5].map(value => `
                                    <div class="scale-option">
                                        <input type="radio" id="q${i}_${value}" name="q${i}" value="${value}" 
                                               ${answers[i] === value ? 'checked' : ''}
                                               onchange="saveAnswer(${i}, ${value})">
                                        <label for="q${i}_${value}" class="scale-circle">
                                            <div class="apple-shape">
                                                <div class="apple-body"></div>
                                                <div class="apple-stem">
                                                    <div class="stem"></div>
                                                    <div class="leaf"></div>
                                                </div>
                                            </div>
                                        </label>
                                    </div>
                                `).join('')}
                            </div>
                            <div class="scale-label right">${q.right}</div>
                        </div>
                    `;
                }
                container.appendChild(questionDiv);
            }

            updateNavigation();
        }

        function saveAnswer(questionIndex, value) {
            answers[questionIndex] = value;
            renderQuestions();

            // æœ€åˆã®å›ç­”æ™‚ã«quiz_startã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡
            const answeredCount = answers.filter(a => a !== null).length;
            if (answeredCount === 1) {
                gtag('event', 'quiz_start', {
                    'event_category': 'engagement',
                    'event_label': 'first_question_answered'
                });
            }

            // é€²æ—ç‡ã¯å›ç­”æ¸ˆã¿ã®è³ªå•æ•°ã§è¨ˆç®—ï¼ˆå·»ãæˆ»ã‚‰ãªã„ã‚ˆã†ã«ï¼‰
            const progress = (answeredCount / 12) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;

            const nextQuestion = document.querySelector(`#q${questionIndex + 1}_1`);
            if (nextQuestion) {
                nextQuestion.scrollIntoView({
                    behavior: 'smooth',
                    block: 'center'
                });
            } else if (questionIndex === answers.length - 1) {
                // æœ€å¾Œã®è³ªå•ãªã‚‰ã€Œæ¬¡ã¸ã€ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºä½ç½®ã«
                document.getElementById('nextBtn').scrollIntoView({
                    behavior: 'smooth',
                    block: 'center'
                });
            }
        }
        function updateNavigation() {
            const nextBtn = document.getElementById('nextBtn');
            const pageIndicator = document.getElementById('pageIndicator');

            if (currentPage === totalPages - 1) {
                nextBtn.textContent = 'çµæœã¸';
                nextBtn.onclick = showResults;
            } else {
                nextBtn.textContent = 'æ¬¡ã¸';
                nextBtn.onclick = nextPage;
            }
        }

        function nextPage() {
            const start = currentPage * questionsPerPage;
            const end = Math.min(start + questionsPerPage, questions.length);
            let allAnswered = true;

            for (let i = start; i < end; i++) {
                if (answers[i] === null) {
                    allAnswered = false;
                    break;
                }
            }

            if (!allAnswered) {
                alert('ã“ã®ãƒšãƒ¼ã‚¸ã®ã™ã¹ã¦ã®è³ªå•ã«å›ç­”ã—ã¦ã‹ã‚‰æ¬¡ã¸é€²ã‚“ã§ãã ã•ã„ã€‚');
                return;
            }

            if (currentPage < totalPages - 1) {
                currentPage++;
                renderQuestions();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function previousPage() {
            if (currentPage > 0) {
                currentPage--;
                renderQuestions();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function calculateResult() {
            const unanswered = answers.filter(a => a === null).length;
            if (unanswered > 0) {
                alert(`ã¾ã  ${unanswered} å€‹ã®è³ªå•ã«å›ç­”ã—ã¦ã„ã¾ã›ã‚“ã€‚ã™ã¹ã¦ã®è³ªå•ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚`);
                return null;
            }

            let scores = {
                R: 0, G: 0,
                S: 0, T: 0,
                E: 0, L: 0,
                F: 0, U: 0
            };

            questions.forEach((q, i) => {
                const value = answers[i];
                const normalizedValue = (value - 3) / 2;

                switch (q.type) {
                    case 'RG':
                        if (normalizedValue < 0) scores.R += Math.abs(normalizedValue);
                        else scores.G += normalizedValue;
                        break;
                    case 'ST':
                        if (normalizedValue < 0) scores.S += Math.abs(normalizedValue);
                        else scores.T += normalizedValue;
                        break;
                    case 'EL':
                        if (normalizedValue < 0) scores.E += Math.abs(normalizedValue);
                        else scores.L += normalizedValue;
                        break;
                    case 'FU':
                        if (normalizedValue < 0) scores.F += Math.abs(normalizedValue);
                        else scores.U += normalizedValue;
                        break;
                }
            });

            const color = scores.R > scores.G ? 'R' : 'G';
            const popularity = scores.F > scores.U ? 'F' : 'U';
            const taste = scores.S > scores.T ? 'S' : 'T';
            const season = scores.E > scores.L ? 'E' : 'L';

            return {
                type: color + popularity + taste + season,
                scores: scores
            };
        }

        function showResults() {
            const result = calculateResult();
            if (!result) return;

            const appleType = appleTypes[result.type];

            // è¨ºæ–­å®Œäº†ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡
            gtag('event', 'quiz_complete', {
                'event_category': 'engagement',
                'event_label': 'diagnosis_completed',
                'apple_type': result.type,
                'apple_name': appleType.name
            });

            // çµæœã‚’localStorageã«ä¿å­˜
            const resultData = {
                type: result.type,
                name: appleType.name,
                description: appleType.description,
                summary: appleType.summary,
                timestamp: new Date().toISOString()
            };
            localStorage.setItem('appleQuizResult', JSON.stringify(resultData));

            document.getElementById('questionContainer').style.display = 'none';
            document.querySelector('.navigation').style.display = 'none';
            document.querySelector('.page-indicator').style.display = 'none';
            document.getElementById('resultContainer').style.display = 'block';

            // ã‚Šã‚“ã”ã®ç”»åƒã‚’è¡¨ç¤º
            const appleImageEl = document.getElementById('appleImage');
            if (appleType.image) {
                appleImageEl.innerHTML = `<img src="${appleType.image}" alt="${appleType.name}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 20px;" />`;
            } else {
                const isGreen = result.type[0] === 'G';
                appleImageEl.textContent = isGreen ? 'ğŸ' : 'ğŸ';
            }

            document.getElementById('appleType').textContent = `${appleType.name}ï¼ˆ${result.type}ï¼‰`;
            document.getElementById('resultDescription').textContent = appleType.description;

            // ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆèª¬æ˜è¡¨ã‚’ä½œæˆ
            const typeTableEl = document.getElementById('typeTable');
            const typeMapping = {
                'R': { label: 'Red', desc: 'èµ¤ã„ï¼ˆæƒ…ç†±çš„ãƒ»æ˜ã‚‹ã„ï¼‰' },
                'G': { label: 'Green', desc: 'ç·‘/é’ã„ï¼ˆå†·é™ãƒ»å†…å‘çš„ï¼‰' },
                'F': { label: 'Famous', desc: 'æœ‰åï¼ˆãƒˆãƒ¬ãƒ³ãƒ‰ã«æ•æ„Ÿï¼‰' },
                'U': { label: 'Unique', desc: 'çã—ã„ï¼ˆå€‹æ€§çš„ãƒ»ãƒ‹ãƒƒãƒï¼‰' },
                'S': { label: 'Sweet', desc: 'ç”˜ã„ï¼ˆå„ªã—ã„ãƒ»ç†æƒ³å®¶ï¼‰' },
                'T': { label: 'Tart', desc: 'é…¸ã£ã±ã„ï¼ˆã‚¹ãƒˆã‚¤ãƒƒã‚¯ãƒ»ç¾å®Ÿçš„ï¼‰' },
                'E': { label: 'Early', desc: 'æ—©ç”Ÿï¼ˆã›ã£ã‹ã¡ãƒ»åŠ¹ç‡çš„ï¼‰' },
                'L': { label: 'Late', desc: 'æ™šç”Ÿï¼ˆãƒã‚¤ãƒšãƒ¼ã‚¹ãƒ»ã®ã‚“ã³ã‚Šï¼‰' }
            };

            const userTypes = result.type.split('');
            typeTableEl.innerHTML = '';

            // 4ã¤ã®è»¸ã‚’è¡¨ç¤º
            const axes = [
                ['R', 'G'],
                ['F', 'U'],
                ['S', 'T'],
                ['E', 'L']
            ];

            axes.forEach((axis, axisIndex) => {
                // è»¸ã”ã¨ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã™ã‚‹ã‚³ãƒ³ãƒ†ãƒŠã‚’ä½œæˆ
                const axisGroup = document.createElement('div');
                axisGroup.style.background = '#f0f0f0';
                axisGroup.style.borderRadius = '10px';
                axisGroup.style.padding = '5px';
                axisGroup.style.display = 'flex';
                axisGroup.style.flexDirection = 'column';
                axisGroup.style.gap = '5px';

                axis.forEach(letter => {
                    const isHighlighted = userTypes.includes(letter);
                    const type = typeMapping[letter];
                    const rowDiv = document.createElement('div');
                    rowDiv.className = `type-row ${isHighlighted ? 'highlighted' : ''}`;

                    // æœ€åˆã®æ–‡å­—ã‚’å¼·èª¿è¡¨ç¤º
                    const firstLetter = type.label.charAt(0);
                    const restOfLabel = type.label.slice(1);

                    rowDiv.innerHTML = `
                        <span class="type-label"><strong style="font-size: 1.2em; font-weight: 900;">${firstLetter}</strong>${restOfLabel}</span>
                        <span class="type-desc">${type.desc}</span>
                    `;
                    axisGroup.appendChild(rowDiv);
                });

                typeTableEl.appendChild(axisGroup);
            });

            // å…±æœ‰ãƒœã‚¿ãƒ³ã®è¨­å®š
            const shareUrl = 'https://kofe02.github.io/appleapp/';
            const hashtags = `ã‚Šã‚“ã”è¨ºæ–­,æ€§æ ¼è¨ºæ–­,${result.type},ã‚Šã‚“ã”ã®ä¼š,é§’å ´ç¥­2025,é’æ£®,ã‚Šã‚“ã”é©å‘½`;

            document.getElementById('shareTwitter').onclick = () => {
                // ã‚·ã‚§ã‚¢ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡
                gtag('event', 'share', {
                    'event_category': 'engagement',
                    'method': 'Twitter',
                    'content_type': 'quiz_result',
                    'item_id': result.type
                });

                const text = `ğŸã‚ãªãŸã®æ€§æ ¼ã‚’ã‚Šã‚“ã”ã§è¡¨ã™ã¨â€¦ï¼ŸğŸ\nğŸã‚Šã‚“ã”æ€§æ ¼è¨ºæ–­ğŸ\n\nç§ã¯ã€${appleType.name}(${result.type})ã€‘ã‚¿ã‚¤ãƒ—ï¼ğŸ\n${appleType.summary}\n\nã‚ãªãŸã«ã´ã£ãŸã‚Šã®ã‚Šã‚“ã”ã‚’è¦‹ã¤ã‘ã‚ˆã†ğŸ‘‡\n${shareUrl}\n\n#${hashtags.replace(/,/g, ' #')}\n@ut_keio_apple`;
                const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
                window.open(url, '_blank', 'noopener');
            };

            document.getElementById('shareLine').onclick = () => {
                // ã‚·ã‚§ã‚¢ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡
                gtag('event', 'share', {
                    'event_category': 'engagement',
                    'method': 'LINE',
                    'content_type': 'quiz_result',
                    'item_id': result.type
                });

                const text = `ğŸã‚ãªãŸã®æ€§æ ¼ã‚’ã‚Šã‚“ã”ã§è¡¨ã™ã¨â€¦ï¼ŸğŸ\nğŸã‚Šã‚“ã”æ€§æ ¼è¨ºæ–­ğŸ\n\nç§ã¯ã€${appleType.name}(${result.type})ã€‘ã‚¿ã‚¤ãƒ—ã§ã—ãŸï¼ğŸ\n${appleType.summary}\n\nã‚ãªãŸã‚‚ã‚„ã£ã¦ã¿ã¦ã­ğŸ‘‡\n${shareUrl}\n\n#ã‚Šã‚“ã”è¨ºæ–­ #é§’å ´ç¥­2025 #ã‚Šã‚“ã”ã®ä¼š`;
                const url = `https://line.me/R/msg/text/?${encodeURIComponent(text)}`;
                window.open(url, '_blank', 'noopener');
            };

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ä¿å­˜ã•ã‚ŒãŸçµæœã‚’ç¢ºèª
        function checkSavedResult() {
            const savedResult = localStorage.getItem('appleQuizResult');
            if (savedResult) {
                try {
                    const resultData = JSON.parse(savedResult);
                    // 7æ—¥ä»¥å†…ã®çµæœã®ã¿è¡¨ç¤º
                    const savedDate = new Date(resultData.timestamp);
                    const daysDiff = (new Date() - savedDate) / (1000 * 60 * 60 * 24);

                    if (daysDiff < 7) {
                        const showSaved = confirm(`å‰å›ã®è¨ºæ–­çµæœï¼ˆ${resultData.name}ã‚¿ã‚¤ãƒ—ï¼‰ãŒä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ã€‚\n\nçµæœã‚’è¡¨ç¤ºã—ã¾ã™ã‹ï¼Ÿ\n\nã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€ã‚’æŠ¼ã™ã¨æ–°ã—ãè¨ºæ–­ã‚’å§‹ã‚ã¾ã™ã€‚`);
                        if (showSaved) {
                            // ä¿å­˜ã•ã‚ŒãŸçµæœã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã€å›ç­”ã‚’å¾©å…ƒã™ã‚‹å¿…è¦ãªã—
                            // ç›´æ¥çµæœç”»é¢ã¸é·ç§»
                            displaySavedResult(resultData);
                            return true;
                        }
                    }
                } catch (e) {
                    console.error('ä¿å­˜ã•ã‚ŒãŸçµæœã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ', e);
                }
            }
            return false;
        }

        function displaySavedResult(resultData) {
            document.getElementById('questionContainer').style.display = 'none';
            document.querySelector('.navigation').style.display = 'none';
            document.querySelector('.page-indicator').style.display = 'none';
            document.getElementById('resultContainer').style.display = 'block';
            document.getElementById('progressBar').style.width = '100%';

            const appleImageEl = document.getElementById('appleImage');
            const isGreen = resultData.type[0] === 'G';
            appleImageEl.textContent = isGreen ? 'ğŸ' : 'ğŸ';

            document.getElementById('appleType').textContent = `${resultData.name}ï¼ˆ${resultData.type}ï¼‰`;
            document.getElementById('resultDescription').textContent = resultData.description;

            // ã‚¿ã‚¤ãƒ—è§£èª¬è¡¨ã‚’å†ç”Ÿæˆ
            const typeTableEl = document.getElementById('typeTable');
            const typeMapping = {
                'R': { label: 'Red', desc: 'èµ¤ã„ï¼ˆæƒ…ç†±çš„ãƒ»æ˜ã‚‹ã„ï¼‰' },
                'G': { label: 'Green', desc: 'ç·‘/é’ã„ï¼ˆå†·é™ãƒ»å†…å‘çš„ï¼‰' },
                'F': { label: 'Famous', desc: 'æœ‰åï¼ˆãƒˆãƒ¬ãƒ³ãƒ‰ã«æ•æ„Ÿï¼‰' },
                'U': { label: 'Unique', desc: 'çã—ã„ï¼ˆå€‹æ€§çš„ãƒ»ãƒ‹ãƒƒãƒï¼‰' },
                'S': { label: 'Sweet', desc: 'ç”˜ã„ï¼ˆå„ªã—ã„ãƒ»ç†æƒ³å®¶ï¼‰' },
                'T': { label: 'Tart', desc: 'é…¸ã£ã±ã„ï¼ˆã‚¹ãƒˆã‚¤ãƒƒã‚¯ãƒ»ç¾å®Ÿçš„ï¼‰' },
                'E': { label: 'Early', desc: 'æ—©ç”Ÿï¼ˆã›ã£ã‹ã¡ãƒ»åŠ¹ç‡çš„ï¼‰' },
                'L': { label: 'Late', desc: 'æ™šç”Ÿï¼ˆãƒã‚¤ãƒšãƒ¼ã‚¹ãƒ»ã®ã‚“ã³ã‚Šï¼‰' }
            };

            const userTypes = resultData.type.split('');
            typeTableEl.innerHTML = '';

            const axes = [
                ['R', 'G'],
                ['F', 'U'],
                ['S', 'T'],
                ['E', 'L']
            ];

            axes.forEach((axis) => {
                const axisGroup = document.createElement('div');
                axisGroup.style.background = '#f0f0f0';
                axisGroup.style.borderRadius = '10px';
                axisGroup.style.padding = '5px';
                axisGroup.style.display = 'flex';
                axisGroup.style.flexDirection = 'column';
                axisGroup.style.gap = '5px';

                axis.forEach(letter => {
                    const isHighlighted = userTypes.includes(letter);
                    const type = typeMapping[letter];
                    const rowDiv = document.createElement('div');
                    rowDiv.className = `type-row ${isHighlighted ? 'highlighted' : ''}`;

                    const firstLetter = type.label.charAt(0);
                    const restOfLabel = type.label.slice(1);

                    rowDiv.innerHTML = `
                        <span class="type-label"><strong style="font-size: 1.2em; font-weight: 900;">${firstLetter}</strong>${restOfLabel}</span>
                        <span class="type-desc">${type.desc}</span>
                    `;
                    axisGroup.appendChild(rowDiv);
                });

                typeTableEl.appendChild(axisGroup);
            });

            // ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã®è¨­å®š
            const shareUrl = 'https://kofe02.github.io/appleapp/';
            const hashtags = `ã‚Šã‚“ã”è¨ºæ–­,æ€§æ ¼è¨ºæ–­,${resultData.type},ã‚Šã‚“ã”ã®ä¼š,é§’å ´ç¥­2025,é’æ£®,ã‚Šã‚“ã”é©å‘½`;

            document.getElementById('shareTwitter').onclick = () => {
                gtag('event', 'share', {
                    'event_category': 'engagement',
                    'method': 'Twitter',
                    'content_type': 'quiz_result',
                    'item_id': resultData.type
                });

                const text = `ğŸã‚ãªãŸã®æ€§æ ¼ã‚’ã‚Šã‚“ã”ã§è¡¨ã™ã¨â€¦ï¼ŸğŸ\nğŸã‚Šã‚“ã”æ€§æ ¼è¨ºæ–­ğŸ\n\nç§ã¯ã€${resultData.name}(${resultData.type})ã€‘ã‚¿ã‚¤ãƒ—ï¼ğŸ\n${resultData.summary}\n\nã‚ãªãŸã«ã´ã£ãŸã‚Šã®ã‚Šã‚“ã”ã‚’è¦‹ã¤ã‘ã‚ˆã†ğŸ‘‡\n${shareUrl}\n\n#${hashtags.replace(/,/g, ' #')}\n@ut_keio_apple`;
                const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
                window.open(url, '_blank', 'noopener');
            };

            document.getElementById('shareLine').onclick = () => {
                gtag('event', 'share', {
                    'event_category': 'engagement',
                    'method': 'LINE',
                    'content_type': 'quiz_result',
                    'item_id': resultData.type
                });

                const text = `ğŸã‚ãªãŸã®æ€§æ ¼ã‚’ã‚Šã‚“ã”ã§è¡¨ã™ã¨â€¦ï¼ŸğŸ\nğŸã‚Šã‚“ã”æ€§æ ¼è¨ºæ–­ğŸ\n\nç§ã¯ã€${resultData.name}(${resultData.type})ã€‘ã‚¿ã‚¤ãƒ—ã§ã—ãŸï¼ğŸ\n${resultData.summary}\n\nã‚ãªãŸã‚‚ã‚„ã£ã¦ã¿ã¦ã­ğŸ‘‡\n${shareUrl}\n\n#ã‚Šã‚“ã”è¨ºæ–­ #é§’å ´ç¥­2025 #ã‚Šã‚“ã”ã®ä¼š`;
                const url = `https://line.me/R/msg/text/?${encodeURIComponent(text)}`;
                window.open(url, '_blank', 'noopener');
            };
        }

        // Initialize
        window.addEventListener('resize', renderQuestions);

        // ä¿å­˜ã•ã‚ŒãŸçµæœãŒãªã„å ´åˆã®ã¿è³ªå•ã‚’è¡¨ç¤º
        if (!checkSavedResult()) {
            renderQuestions();
        }
    </script>
</body>

</html>